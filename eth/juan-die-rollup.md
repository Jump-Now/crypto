# 🧻 卷叠(Rollup)

将数百笔交易打包（或“卷叠”）到一层网络的一项交易中。这会将一层网络的交易费分散到整个卷叠中的所有用户，降低每个用户的费用。

* **乐观卷叠**：假设交易在默认情况下有效，并且在遇到挑战的情况下只通过**欺诈证明**运行计算。&#x20;
* **零知识卷叠**：在链下运行计算并向链上提交**有效性证明**。&#x20;

有效性证明是一种加密保证，即卷叠提出的状态变化确实是执行给定批次交易的结果。 这意味着零知识卷叠只需提供有效性证明即可在以太坊上最终确定交易，而不是像乐观卷叠那样将所有交易数据发布到链上。

将资金从零知识卷叠转移到以太坊时不会出现延迟，因为一旦零知识卷叠合约验证了有效性证明后，就会执行退出交易。 相反，从乐观卷叠中提取资金会产生延迟，让任何人都可以使用欺诈证明来挑战退出交易。

***

## 乐观卷叠

想象你在一个忙碌的市场上买卖东西。这个市场太繁忙，处理每个交易都很慢。于是，你找了个帮手，他可以先帮你记录交易，然后再一起提交到市场去确认。你相信你的帮手会记录正确的交易，除非有人发现错误并提出异议。

{% embed url="https://ethereum.org/zh/developers/docs/scaling/optimistic-rollups/" %}

• 优点：这种方式提高了处理交易的速度，因为不需要逐笔验证所有交易。

• 缺点：需要等待一段时间，以防有人提出异议。这段时间里交易虽然被打包，但还不能完全确认。

## 零知识卷叠

想象你在市场上买卖东西，你找了个帮手，他不仅帮你记录交易，还能证明所有交易都是正确的，但他不会告诉市场具体的交易细节。市场相信他的证明，所以不需要自己验证每个交易。

{% embed url="https://ethereum.org/zh/developers/docs/scaling/zk-rollups/" %}

• 优点：这种方式既保证了交易的隐私性，又能快速确认交易的有效性。

• 缺点：零知识证明的技术比较复杂，计算成本较高。

主要有以下两种有效性证明：

1. ZK-SNARK（零知识简洁非交互式知识论证）：需要初始的可信设置（创建公共参考字符串），验证SNARK证明的时间非常短，非常适合区块链和其他需要快速验证的应用。
2. ZK-STARK（零知识可扩容透明知识论证）：不需要初始的可信设置，STARK 可以处理大规模的数据和计算，具有较好的可扩展性，非常适合处理大量交易的区块链应用。

SNARK和STARK各自有其优势和应用场景，选择使用哪种技术取决于具体的需求和安全性考虑。SNARK适用于需要高效、小型证明的场景，而STARK则更适合需要透明性和大规模扩展性的应用。
